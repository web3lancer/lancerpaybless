(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[790],{14353:(e,t,a)=>{"use strict";a.d(t,{O:()=>s.useTransaction});var s=a(68080)},25587:(e,t,a)=>{Promise.resolve().then(a.bind(a,51228))},49969:(e,t,a)=>{"use strict";a.d(t,{G:()=>r});var s=a(74807);function r(e){let{children:t}=e;return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsx)("main",{children:t})})}a(95423)},51228:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var s=a(74807),r=a(95423),n=a(99847),c=a(14353),i=a(49969),l=a(30760),u=a(67138),o=a.n(u);function d(){let{user:e}=(0,n.A)(),{transactions:t,isLoading:a,refreshTransactions:u}=(0,c.O)(),[d,m]=(0,r.useState)(t),[x,h]=(0,r.useState)("all"),[y,w]=(0,r.useState)(!1);(0,r.useEffect)(()=>{A()},[t,x]);let A=()=>{let a=t;switch(x){case"send":a=t.filter(t=>"send"===t.type&&t.fromUserId===(null==e?void 0:e.$id));break;case"receive":a=t.filter(t=>"receive"===t.type||t.toUserId===(null==e?void 0:e.$id));break;case"pending":a=t.filter(e=>"pending"===e.status);break;case"confirmed":a=t.filter(e=>"confirmed"===e.status);break;default:a=t}m(a)},g=async()=>{w(!0),await u(),w(!1)},S=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),f=t=>t.fromUserId===(null==e?void 0:e.$id)?(0,s.jsx)(l.ei4,{className:"w-5 h-5 text-red-500"}):(0,s.jsx)(l.LPr,{className:"w-5 h-5 text-green-500"}),v=e=>{switch(e){case"confirmed":return"text-green-600 bg-green-100";case"pending":return"text-yellow-600 bg-yellow-100";case"failed":return"text-red-600 bg-red-100";default:return"text-neutral-600 bg-neutral-100"}},L=e=>({btc:"BTC",eth:"ETH",matic:"MATIC",bnb:"BNB",usdt:"USDT",usdc:"USDC"})[e]||e.toUpperCase();return(0,s.jsx)(i.G,{children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-6 max-w-4xl",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)(o(),{href:"/",className:"inline-flex items-center text-neutral-600 hover:text-neutral-900 mb-4",children:[(0,s.jsx)(l.kRp,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-neutral-900",children:"Transaction History"}),(0,s.jsx)("p",{className:"text-neutral-600 mt-2",children:"View all your cryptocurrency transactions"})]}),(0,s.jsxs)("button",{onClick:g,disabled:y,className:"flex items-center px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 disabled:opacity-50 transition-colors",children:[(0,s.jsx)(l.jTZ,{className:"w-4 h-4 mr-2 ".concat(y?"animate-spin":"")}),"Refresh"]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-neutral-200 p-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(l.K7R,{className:"w-5 h-5 text-neutral-500"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:[{value:"all",label:"All Transactions"},{value:"send",label:"Sent"},{value:"receive",label:"Received"},{value:"pending",label:"Pending"},{value:"confirmed",label:"Confirmed"}].map(e=>(0,s.jsx)("button",{onClick:()=>h(e.value),className:"px-3 py-1 rounded-full text-sm transition-colors ".concat(x===e.value?"bg-cyan-500 text-white":"bg-neutral-100 text-neutral-600 hover:bg-neutral-200"),children:e.label},e.value))})]}),(0,s.jsxs)("div",{className:"mt-2 text-sm text-neutral-500",children:["Showing ",d.length," of ",t.length," transactions"]})]}),(0,s.jsx)("div",{className:"bg-white rounded-xl border border-neutral-200",children:a?(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)("div",{className:"animate-spin w-8 h-8 border-2 border-cyan-500 border-t-transparent rounded-full mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-neutral-500",children:"Loading transactions..."})]}):0===d.length?(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)("div",{className:"text-neutral-400 mb-4",children:(0,s.jsx)(l.ei4,{className:"w-12 h-12 mx-auto"})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-neutral-700 mb-2",children:"No transactions found"}),(0,s.jsx)("p",{className:"text-neutral-500 mb-4",children:"all"===x?"You haven't made any transactions yet":"No ".concat(x," transactions found")}),(0,s.jsx)(o(),{href:"/send",className:"inline-flex items-center px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors",children:"Send Your First Transaction"})]}):(0,s.jsx)("div",{className:"divide-y divide-neutral-200",children:d.map(t=>(0,s.jsx)("div",{className:"p-6 hover:bg-neutral-50 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:f(t)}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("h3",{className:"font-medium text-neutral-900",children:[t.fromUserId===(null==e?void 0:e.$id)?"Sent":"Received"," ",L(t.tokenId)]}),(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(v(t.status)),children:t.status})]}),(0,s.jsx)("div",{className:"text-sm text-neutral-500 mt-1",children:t.description||(t.fromUserId===(null==e?void 0:e.$id)?"To: ".concat(t.toAddress):"From: ".concat(t.fromAddress))}),(0,s.jsxs)("div",{className:"text-xs text-neutral-400 mt-1",children:[S(t.createdAt),t.confirmedAt&&t.confirmedAt!==t.createdAt&&(0,s.jsxs)("span",{children:[" â€¢ Confirmed: ",S(t.confirmedAt)]})]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"font-medium ".concat(t.fromUserId===(null==e?void 0:e.$id)?"text-red-600":"text-green-600"),children:[t.fromUserId===(null==e?void 0:e.$id)?"-":"+",t.amount," ",L(t.tokenId)]}),t.feeAmount&&t.fromUserId===(null==e?void 0:e.$id)&&(0,s.jsxs)("div",{className:"text-sm text-neutral-500",children:["Fee: ",t.feeAmount," ",L(t.tokenId)]}),t.txHash&&(0,s.jsx)("div",{className:"flex items-center mt-1",children:(0,s.jsxs)("a",{href:"#",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-cyan-600 hover:text-cyan-700 flex items-center",children:["View on Explorer",(0,s.jsx)(l.HaR,{className:"w-3 h-3 ml-1"})]})})]})]})},t.transactionId))})})]})})}},53696:(e,t,a)=>{"use strict";a.d(t,{B:()=>r});var s=a(74219);class r{static async createUser(e){let t=new Date().toISOString();return await s.LL.createDocument(s.AH,s.WU.USERS,e.userId,{...e,createdAt:t,updatedAt:t})}static async getUser(e){return await s.LL.getDocument(s.AH,s.WU.USERS,e)}static async updateUser(e,t){return await s.LL.updateDocument(s.AH,s.WU.USERS,e,{...t,updatedAt:new Date().toISOString()})}static async getUserByEmail(e){try{return(await s.LL.listDocuments(s.AH,s.WU.USERS,[s.XK.equal("email",e)])).documents[0]||null}catch(e){return null}}static async getUserByUsername(e){try{return(await s.LL.listDocuments(s.AH,s.WU.USERS,[s.XK.equal("username",e)])).documents[0]||null}catch(e){return null}}static async createWallet(e){let t=s.ID.unique(),a=await s.LL.createDocument(s.AH,s.WU.WALLETS,t,{...e,walletName:e.name,walletAddress:e.address,walletId:t,createdAt:new Date().toISOString()});return a.name=a.walletName,a.address=a.walletAddress,a}static async getUserWallets(e){return(await s.LL.listDocuments(s.AH,s.WU.WALLETS,[s.XK.equal("userId",e),s.XK.equal("isActive",!0),s.XK.orderDesc("createdAt")])).documents.map(e=>({...e,name:e.walletName||e.name,address:e.walletAddress||e.address}))}static async getWallet(e){return await s.LL.getDocument(s.AH,s.WU.WALLETS,e)}static async updateWallet(e,t){return await s.LL.updateDocument(s.AH,s.WU.WALLETS,e,t)}static async setDefaultWallet(e,t){let a=await this.getUserWallets(e);return await Promise.all(a.map(e=>this.updateWallet(e.walletId,{isDefault:!1}))),await this.updateWallet(t,{isDefault:!0})}static async getTokens(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return(await s.LL.listDocuments(s.AH,s.WU.TOKENS,[s.XK.equal("isActive",!0),s.XK.orderAsc("name"),s.XK.limit(e)])).documents}static async getToken(e){return await s.LL.getDocument(s.AH,s.WU.TOKENS,e)}static async getTokenBySymbol(e){try{return(await s.LL.listDocuments(s.AH,s.WU.TOKENS,[s.XK.equal("symbol",e)])).documents[0]||null}catch(e){return null}}static async createTransaction(e){let t=s.ID.unique();return await s.LL.createDocument(s.AH,s.WU.TRANSACTIONS,t,{...e,transactionId:t,createdAt:new Date().toISOString()})}static async getUserTransactions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return(await s.LL.listDocuments(s.AH,s.WU.TRANSACTIONS,[s.XK.or([s.XK.equal("fromUserId",e),s.XK.equal("toUserId",e)]),s.XK.orderDesc("createdAt"),s.XK.limit(t)])).documents}static async getTransaction(e){return await s.LL.getDocument(s.AH,s.WU.TRANSACTIONS,e)}static async updateTransaction(e,t){return await s.LL.updateDocument(s.AH,s.WU.TRANSACTIONS,e,t)}static async createPaymentRequest(e){let t=s.ID.unique();return await s.LL.createDocument(s.AH,s.WU.PAYMENT_REQUESTS,t,{...e,requestId:t,createdAt:new Date().toISOString()})}static async getUserPaymentRequests(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sent";return(await s.LL.listDocuments(s.AH,s.WU.PAYMENT_REQUESTS,[s.XK.equal("sent"===t?"fromUserId":"toUserId",e),s.XK.orderDesc("createdAt")])).documents}static async getPaymentRequest(e){return await s.LL.getDocument(s.AH,s.WU.PAYMENT_REQUESTS,e)}static async updatePaymentRequest(e,t){await s.LL.updateDocument(s.AH,s.WU.PAYMENT_REQUESTS,e,t)}static async getPaymentRequestByInvoice(e){let t=await s.LL.listDocuments(s.AH,s.WU.PAYMENT_REQUESTS,[s.XK.equal("invoiceNumber",e)]);if(0===t.documents.length)throw Error("Payment request not found");return t.documents[0]}static async getExchangeRates(){return(await s.LL.listDocuments(s.AH,s.WU.EXCHANGE_RATES,[s.XK.equal("isActive",!0),s.XK.orderDesc("lastUpdated")])).documents}static async getExchangeRate(e,t){try{return(await s.LL.listDocuments(s.AH,s.WU.EXCHANGE_RATES,[s.XK.equal("fromCurrency",e),s.XK.equal("toCurrency",t),s.XK.equal("isActive",!0)])).documents[0]||null}catch(e){return null}}static async createSecurityLog(e){let t=s.ID.unique();return await s.LL.createDocument(s.AH,s.WU.SECURITY_LOGS,t,{...e,logId:t,createdAt:new Date().toISOString()})}static async getUserSecurityLogs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return(await s.LL.listDocuments(s.AH,s.WU.SECURITY_LOGS,[s.XK.equal("userId",e),s.XK.orderDesc("createdAt"),s.XK.limit(t)])).documents}static async createAPIKey(e){let t=s.ID.unique();return await s.LL.createDocument(s.AH,s.WU.API_KEYS,t,{...e,keyId:t,createdAt:new Date().toISOString()})}static async getUserAPIKeys(e){return(await s.LL.listDocuments(s.AH,s.WU.API_KEYS,[s.XK.equal("userId",e),s.XK.orderDesc("createdAt")])).documents}static async updateAPIKey(e,t){return await s.LL.updateDocument(s.AH,s.WU.API_KEYS,e,t)}static async deactivateAPIKey(e){return await this.updateAPIKey(e,{isActive:!1})}}},68080:(e,t,a)=>{"use strict";a.r(t),a.d(t,{TransactionProvider:()=>i,useTransaction:()=>l});var s=a(74807),r=a(95423),n=a(53696);let c=(0,r.createContext)(void 0);function i(e){let{children:t}=e,[a,i]=(0,r.useState)([]),[l,u]=(0,r.useState)(!1),o=async()=>{u(!0);try{let e=await n.B.getUserTransactions("current-user-id");i(e)}catch(e){console.error("Failed to load transactions:",e)}finally{u(!1)}},d=async e=>{try{let t=await n.B.createTransaction(e);return await o(),t.transactionId}catch(e){throw console.error("Failed to send transaction:",e),e}},m=async()=>{await o()};return(0,r.useEffect)(()=>{o()},[]),(0,s.jsx)(c.Provider,{value:{transactions:a,isLoading:l,sendTransaction:d,getTransactionsByWallet:e=>a.filter(t=>t.fromWalletId===e||t.toAddress===e),refreshTransactions:m},children:t})}function l(){let e=(0,r.useContext)(c);if(void 0===e)throw Error("useTransaction must be used within a TransactionProvider");return e}},74219:(e,t,a)=>{"use strict";a.d(t,{AH:()=>i,ID:()=>s.ID,LL:()=>c,WU:()=>l,XK:()=>s.XK,ct:()=>n});var s=a(69960);let r=new s.Kj;r.setEndpoint("https://fra.cloud.appwrite.io/v1").setProject("68399b0c0018d6ce71bc");let n=new s.gD(r),c=new s.Lv(r);new s.wc(r);let i="683a31960011608eaee5",l={USERS:"users",WALLETS:"wallets",TOKENS:"tokens",TRANSACTIONS:"transactions",PAYMENT_REQUESTS:"payment_requests",EXCHANGE_RATES:"exchange_rates",SECURITY_LOGS:"security_logs",API_KEYS:"api_keys"}},85430:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AuthProvider:()=>l,useAuth:()=>u});var s=a(74807),r=a(95423),n=a(53696),c=a(74219);let i=(0,r.createContext)(void 0);function l(e){let{children:t}=e,[a,l]=(0,r.useState)(null),[u,o]=(0,r.useState)(null),[d,m]=(0,r.useState)(!0),x=e=>e.split("@")[0].toLowerCase().replace(/[^a-z0-9]/g,""),h=async e=>{try{let t=await n.B.getUser(e.$id);if(t)return o(t),t}catch(e){console.log("Creating new user profile...")}try{let t=x(e.email),a={userId:e.$id,email:e.email,username:t,displayName:e.name||t,kycStatus:"pending",kycLevel:0,twoFactorEnabled:!1,isActive:!0,preferredCurrency:"USD"},s=await n.B.createUser(a);return o(s),await n.B.createSecurityLog({userId:e.$id,action:"profile_created",ipAddress:"unknown",success:!0,riskScore:0}),s}catch(e){throw console.error("Failed to create user profile:",e),e}},y=async()=>{if(a)try{let e=await n.B.getUser(a.$id);o(e)}catch(e){console.error("Failed to refresh profile:",e)}},w=async(e,t)=>{m(!0);try{await c.ct.createEmailPasswordSession(e,t);let a=await c.ct.get();l(a),await h(a),await n.B.createSecurityLog({userId:a.$id,action:"login_success",ipAddress:"unknown",success:!0,riskScore:0})}catch(t){if(e)try{let t=await n.B.getUserByEmail(e);t&&await n.B.createSecurityLog({userId:t.userId,action:"login_failed",ipAddress:"unknown",success:!1,riskScore:3})}catch(e){console.error("Failed to log security event:",e)}throw t}finally{m(!1)}},A=async(e,t,a)=>{m(!0);try{await c.ct.create("unique()",e,t,a),await c.ct.createEmailPasswordSession(e,t);let s=await c.ct.get();l(s),await h(s)}catch(e){throw e}finally{m(!1)}},g=async()=>{try{a&&await n.B.createSecurityLog({userId:a.$id,action:"logout",ipAddress:"unknown",success:!0,riskScore:0}),await c.ct.deleteSession("current"),l(null),o(null)}catch(e){console.error("Logout failed:",e)}};return(0,r.useEffect)(()=>{(async()=>{m(!0);try{let e=await c.ct.get();l(e),await h(e)}catch(e){l(null),o(null)}finally{m(!1)}})()},[]),(0,s.jsx)(i.Provider,{value:{user:a,userProfile:u,isLoading:d,login:w,register:A,logout:g,refreshProfile:y},children:t})}function u(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},99847:(e,t,a)=>{"use strict";a.d(t,{A:()=>s.useAuth,O:()=>s.AuthProvider});var s=a(85430)}},e=>{var t=t=>e(e.s=t);e.O(0,[215,960,898,412,640,358],()=>t(25587)),_N_E=e.O()}]);