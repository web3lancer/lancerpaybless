(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[89],{1363:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>m});var t=r(74807),a=r(95423),n=r(93095),l=r(63909),i=r(30760),o=r(74219),d=r(67138),c=r.n(d);function u(){let e=(0,n.useSearchParams)(),s=(0,n.useRouter)(),[r,d]=(0,a.useState)({password:"",confirmPassword:""}),[u,m]=(0,a.useState)(!1),[p,x]=(0,a.useState)(!1),[h,f]=(0,a.useState)(!1),[w,b]=(0,a.useState)(""),[y,j]=(0,a.useState)(""),[N,v]=(0,a.useState)("");(0,a.useEffect)(()=>{let s=null==e?void 0:e.get("userId"),r=null==e?void 0:e.get("secret");s&&r?(j(s),v(r)):b("Invalid reset link")},[e]);let g=(e,s)=>{d(r=>({...r,[e]:s})),b("")},S=()=>{let e=[];return r.password?r.password.length<8&&e.push("Password must be at least 8 characters long"):e.push("Password is required"),r.password!==r.confirmPassword&&e.push("Passwords do not match"),e},P=async e=>{e.preventDefault();let t=S();if(t.length>0)return void b(t[0]);if(!y||!N)return void b("Invalid reset link");try{f(!0),b(""),await o.ct.updateRecovery(y,N,r.password,r.confirmPassword),s.push("/auth/login?message=password-reset-success")}catch(e){b(e.message||"Failed to reset password")}finally{f(!1)}};return y&&N?(0,t.jsx)(a.Suspense,{children:(0,t.jsx)("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,t.jsx)("div",{className:"max-w-md w-full space-y-8",children:(0,t.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"mt-6 text-3xl font-bold text-neutral-900",children:"Reset your password"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-neutral-600",children:"Enter your new password below."})]}),(0,t.jsxs)("div",{className:"mt-8 bg-white py-8 px-6 shadow-sm rounded-lg border border-neutral-200",children:[w&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,t.jsx)("p",{className:"text-sm text-red-600",children:w})}),(0,t.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-neutral-700 mb-1",children:"New Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,t.jsx)(i.F5$,{className:"h-5 w-5 text-neutral-400"})}),(0,t.jsx)("input",{id:"password",type:u?"text":"password",value:r.password,onChange:e=>g("password",e.target.value),className:"block w-full pl-10 pr-10 py-2 border border-neutral-300 rounded-md placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter your new password",required:!0}),(0,t.jsx)("button",{type:"button",onClick:()=>m(!u),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:u?(0,t.jsx)(i._NO,{className:"h-5 w-5 text-neutral-400"}):(0,t.jsx)(i.Vap,{className:"h-5 w-5 text-neutral-400"})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-neutral-700 mb-1",children:"Confirm New Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,t.jsx)(i.F5$,{className:"h-5 w-5 text-neutral-400"})}),(0,t.jsx)("input",{id:"confirmPassword",type:p?"text":"password",value:r.confirmPassword,onChange:e=>g("confirmPassword",e.target.value),className:"block w-full pl-10 pr-10 py-2 border border-neutral-300 rounded-md placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Confirm your new password",required:!0}),(0,t.jsx)("button",{type:"button",onClick:()=>x(!p),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:p?(0,t.jsx)(i._NO,{className:"h-5 w-5 text-neutral-400"}):(0,t.jsx)(i.Vap,{className:"h-5 w-5 text-neutral-400"})})]})]}),(0,t.jsx)("button",{type:"submit",disabled:h,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Resetting...":"Reset Password"})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsx)(c(),{href:"/auth/login",className:"text-sm text-primary-600 hover:text-primary-500",children:"Back to Login"})})]})]})})})}):(0,t.jsx)(a.Suspense,{children:(0,t.jsx)("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,t.jsx)("div",{className:"max-w-md w-full space-y-8",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"mt-6 text-3xl font-bold text-neutral-900",children:"Invalid Reset Link"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-neutral-600",children:"This password reset link is invalid or has expired."}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)(c(),{href:"/auth/forgot-password",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Request New Reset Link"})})]})})})})}function m(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}),children:(0,t.jsx)(u,{})})}},5414:(e,s,r)=>{Promise.resolve().then(r.bind(r,1363))},74219:(e,s,r)=>{"use strict";r.d(s,{AH:()=>i,ID:()=>t.ID,LL:()=>l,WU:()=>o,XK:()=>t.XK,ct:()=>n});var t=r(69960);let a=new t.Kj;a.setEndpoint("https://fra.cloud.appwrite.io/v1").setProject("68399b0c0018d6ce71bc");let n=new t.gD(a),l=new t.Lv(a);new t.wc(a);let i="683a31960011608eaee5",o={USERS:"users",WALLETS:"wallets",TOKENS:"tokens",TRANSACTIONS:"transactions",PAYMENT_REQUESTS:"payment_requests",EXCHANGE_RATES:"exchange_rates",SECURITY_LOGS:"security_logs",API_KEYS:"api_keys"}},93095:(e,s,r)=>{"use strict";var t=r(9103);r.o(t,"usePathname")&&r.d(s,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(s,{useSearchParams:function(){return t.useSearchParams}})}},e=>{var s=s=>e(e.s=s);e.O(0,[215,960,898,909,412,640,358],()=>s(5414)),_N_E=e.O()}]);