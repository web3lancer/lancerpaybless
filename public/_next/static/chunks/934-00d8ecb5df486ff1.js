"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[934],{49553:(e,t,a)=>{a.d(t,{G:()=>f});var s=a(74807),r=a(95423),n=a(53398),l=a(99847),c=a(93095),i=a(67138),o=a.n(i),u=a(30760);function d(e){var t;let{onMenuClick:a,mobile:i=!1}=e,{user:d,signOut:m,isLoading:h,isAuthenticated:x}=(0,l.A)(),g=(0,c.useRouter)(),[y,f]=(0,r.useState)(!1),p=async()=>{try{await m(),g.push("/auth/login")}catch(e){console.error("Sign out failed:",e)}},w=(null==d?void 0:d.name)||"Account";w.charAt(0).toUpperCase();let N=(null==d?void 0:d.email)||"";return(0,s.jsxs)("header",{className:(0,n.cn)("flex h-16 items-center justify-between bg-white border-b border-neutral-200 px-6",{"px-4":i}),children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[i&&(0,s.jsx)("button",{onClick:a,className:"p-2 text-neutral-600 hover:text-neutral-900 lg:hidden",children:(0,s.jsx)(u.ND1,{className:"h-5 w-5"})}),i&&(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"h-8 w-8 rounded-lg bg-cyan-500 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white font-bold text-sm",children:"W3"})}),(0,s.jsx)("span",{className:"font-semibold text-neutral-900",children:"Web3Lancer Pay"})]}),!i&&(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(u.CKj,{className:"h-4 w-4 text-neutral-400"})}),(0,s.jsx)("input",{type:"text",placeholder:"Search transactions, addresses...",className:"w-96 pl-10 pr-4 py-2 border border-neutral-300 rounded-lg bg-neutral-50 text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-200"})]})]}),!i&&(0,s.jsxs)("div",{className:"absolute left-1/2 transform -translate-x-1/2 flex items-center gap-2",children:[(0,s.jsx)("div",{className:"h-8 w-8 rounded-lg bg-cyan-500 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white font-bold text-sm",children:"W3"})}),(0,s.jsx)("span",{className:"font-semibold text-neutral-900",children:"Web3Lancer Pay"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("button",{className:"relative p-2 text-neutral-600 hover:text-neutral-900 transition-colors",children:[(0,s.jsx)(u.zd,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-red-500 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-[10px] text-white font-bold",children:"3"})})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>f(!y),className:"flex items-center gap-2 p-1.5 rounded-lg hover:bg-neutral-100 transition-colors",children:[(0,s.jsx)("div",{className:"h-8 w-8 rounded-full bg-cyan-100 flex items-center justify-center",children:x&&(null==d||null==(t=d.prefs)?void 0:t.profileImage)?(0,s.jsx)("img",{src:d.prefs.profileImage,alt:w,className:"h-8 w-8 rounded-full object-cover"}):(0,s.jsx)(u.JXP,{className:"h-4 w-4 text-cyan-600"})}),!i&&(0,s.jsx)("span",{className:"text-sm font-medium text-neutral-900",children:h?"...":x&&w.split(" ")[0]||"Account"})]}),y&&(0,s.jsx)("div",{className:"absolute right-0 mt-2 w-60 bg-white rounded-lg shadow-lg py-1 z-50 border border-neutral-200",children:x?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"px-4 py-3 border-b border-neutral-200",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-neutral-900",children:w}),(0,s.jsx)("p",{className:"text-xs text-neutral-500 truncate",children:N})]}),(0,s.jsxs)("div",{className:"py-1",children:[(0,s.jsxs)(o(),{href:"/profile",className:"flex items-center px-4 py-2 text-sm text-neutral-700 hover:bg-neutral-100",onClick:()=>f(!1),children:[(0,s.jsx)(u.JXP,{className:"mr-3 h-4 w-4 text-neutral-500"}),"Your Profile"]}),(0,s.jsxs)(o(),{href:"/settings",className:"flex items-center px-4 py-2 text-sm text-neutral-700 hover:bg-neutral-100",onClick:()=>f(!1),children:[(0,s.jsx)(u.VSk,{className:"mr-3 h-4 w-4 text-neutral-500"}),"Settings"]}),(0,s.jsxs)(o(),{href:"/settings/security",className:"flex items-center px-4 py-2 text-sm text-neutral-700 hover:bg-neutral-100",onClick:()=>f(!1),children:[(0,s.jsx)(u.pcC,{className:"mr-3 h-4 w-4 text-neutral-500"}),"Security"]})]}),(0,s.jsx)("div",{className:"py-1 border-t border-neutral-200",children:(0,s.jsxs)("button",{onClick:()=>{f(!1),p()},className:"flex w-full items-center px-4 py-2 text-sm text-red-600 hover:bg-neutral-100",children:[(0,s.jsx)(u.QeK,{className:"mr-3 h-4 w-4"}),"Sign out"]})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"px-4 py-3 border-b border-neutral-200",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-neutral-900",children:"Welcome to Web3Lancer Pay"}),(0,s.jsx)("p",{className:"text-xs text-neutral-500",children:"Sign in to access your account"})]}),(0,s.jsxs)("div",{className:"py-1",children:[(0,s.jsxs)(o(),{href:"/auth/login",className:"flex items-center px-4 py-2 text-sm text-neutral-700 hover:bg-neutral-100",onClick:()=>f(!1),children:[(0,s.jsx)(u.JXP,{className:"mr-3 h-4 w-4 text-neutral-500"}),"Sign In"]}),(0,s.jsxs)(o(),{href:"/auth/signup",className:"flex items-center px-4 py-2 text-sm text-neutral-700 hover:bg-neutral-100",onClick:()=>f(!1),children:[(0,s.jsx)(u.GGD,{className:"mr-3 h-4 w-4 text-neutral-500"}),"Sign Up"]})]})]})})]})]})]})}let m={home:"\uD83C\uDFE0",wallet:"\uD83D\uDC5B",send:"\uD83D\uDCE4",request:"\uD83D\uDCE5",history:"\uD83D\uDCCB"},h=[{name:"Home",href:"/home",icon:m.home},{name:"Wallets",href:"/wallets",icon:m.wallet},{name:"Send",href:"/send",icon:m.send},{name:"Request",href:"/requests",icon:m.request},{name:"History",href:"/history",icon:m.history}];function x(){let e=(0,c.usePathname)();return(0,s.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-40 bg-white border-t border-neutral-200 lg:hidden",children:(0,s.jsx)("div",{className:"flex items-center justify-around px-2 py-2",children:h.map(t=>{let a=e===t.href;return(0,s.jsxs)(o(),{href:t.href,className:(0,n.cn)("flex flex-col items-center gap-1 rounded-lg px-3 py-2 transition-all duration-200",{"text-cyan-600":a,"text-neutral-600":!a}),children:[(0,s.jsx)("div",{className:(0,n.cn)("text-xl",{"scale-110":a}),children:t.icon}),(0,s.jsx)("span",{className:(0,n.cn)("text-xs font-medium",{"text-cyan-600":a,"text-neutral-600":!a}),children:t.name}),a&&(0,s.jsx)("div",{className:"absolute -top-1 h-1 w-8 bg-cyan-500 rounded-full"})]},t.name)})})})}let g=[{name:"Dashboard",href:"/home",icon:"\uD83C\uDFE0"},{name:"Wallets",href:"/wallets",icon:"\uD83D\uDC5B"},{name:"Send",href:"/send",icon:"\uD83D\uDCE4"},{name:"Request",href:"/requests",icon:"\uD83D\uDCE5"},{name:"Exchange",href:"/exchange",icon:"\uD83D\uDD04"},{name:"History",href:"/history",icon:"\uD83D\uDCCB"},{name:"Settings",href:"/settings",icon:"⚙️"}],y=e=>{let{isOpen:t,onClose:a}=e,r=(0,c.usePathname)();return(0,s.jsxs)(s.Fragment,{children:[t&&(0,s.jsx)("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden",onClick:a}),(0,s.jsx)("div",{className:(0,n.cn)("bg-white border-r border-neutral-200 h-full w-full","lg:hidden fixed top-0 left-0 z-50 h-[100vh] w-64 transform transition-transform duration-300 ease-in-out",{"translate-x-0":t,"-translate-x-full":!t},"lg:block lg:relative lg:h-full lg:w-full lg:transform-none lg:transition-none"),children:(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-2",children:g.map(e=>{let t=r===e.href;return(0,s.jsxs)(o(),{href:e.href,onClick:()=>a(),className:(0,n.cn)("flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors",{"bg-cyan-50 text-cyan-700 border-r-2 border-cyan-500":t,"text-neutral-600 hover:bg-neutral-50 hover:text-neutral-900":!t}),children:[(0,s.jsx)("span",{className:"mr-3 text-base",children:e.icon}),e.name]},e.name)})}),(0,s.jsx)("div",{className:"px-4 py-4 border-t border-neutral-200",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white font-bold text-xs",children:"W3"})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-neutral-900",children:"Web3Lancer Pay"}),(0,s.jsx)("p",{className:"text-xs text-neutral-500",children:"v1.0.0"})]})]})})]})})]})},f=e=>{let{children:t}=e,[a,n]=(0,r.useState)(!1),l=()=>{n(!a)};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsxs)("div",{className:"fixed top-0 left-0 right-0 z-50 h-16",children:[(0,s.jsx)("div",{className:"lg:hidden h-full",children:(0,s.jsx)(d,{onMenuClick:l,mobile:!0})}),(0,s.jsx)("div",{className:"hidden lg:block h-full",children:(0,s.jsx)(d,{onMenuClick:l,mobile:!1})})]}),(0,s.jsxs)("div",{className:"pt-16 min-h-screen",children:[(0,s.jsxs)("div",{className:"hidden lg:block",children:[(0,s.jsx)("div",{className:"fixed top-16 left-0 w-64 h-[calc(100vh-4rem)] overflow-hidden z-40 border-t-0",children:(0,s.jsx)(y,{isOpen:!0,onClose:()=>{}})}),(0,s.jsx)("div",{className:"ml-64 pb-8",children:(0,s.jsx)("main",{children:t})})]}),(0,s.jsxs)("div",{className:"lg:hidden",children:[(0,s.jsx)(y,{isOpen:a,onClose:()=>{n(!1)}}),(0,s.jsx)("main",{className:"pb-20",children:t})]})]}),(0,s.jsx)(x,{})]})}},53398:(e,t,a)=>{a.d(t,{JT:()=>c,cn:()=>n,vv:()=>l});var s=a(44374),r=a(97567);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}function c(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,s=a;e>=1e3?s=2:e>=100?s=3:e>=10?s=4:e>=1&&(s=5);let r=parseFloat(e.toFixed(s)).toString();return"".concat(r," ").concat(t)}},53696:(e,t,a)=>{a.d(t,{B:()=>r});var s=a(74219);class r{static async createUser(e){let t=new Date().toISOString();return await s.LL.createDocument(s.AH,s.WU.USERS,e.userId,{...e,createdAt:t,updatedAt:t})}static async getUser(e){return await s.LL.getDocument(s.AH,s.WU.USERS,e)}static async updateUser(e,t){return await s.LL.updateDocument(s.AH,s.WU.USERS,e,{...t,updatedAt:new Date().toISOString()})}static async getUserByEmail(e){try{return(await s.LL.listDocuments(s.AH,s.WU.USERS,[s.XK.equal("email",e)])).documents[0]||null}catch(e){return null}}static async getUserByUsername(e){try{return(await s.LL.listDocuments(s.AH,s.WU.USERS,[s.XK.equal("username",e)])).documents[0]||null}catch(e){return null}}static async createWallet(e){let t=s.ID.unique(),a=await s.LL.createDocument(s.AH,s.WU.WALLETS,t,{...e,walletName:e.name,walletAddress:e.address,walletId:t,createdAt:new Date().toISOString()});return a.name=a.walletName,a.address=a.walletAddress,a}static async getUserWallets(e){return(await s.LL.listDocuments(s.AH,s.WU.WALLETS,[s.XK.equal("userId",e),s.XK.equal("isActive",!0),s.XK.orderDesc("createdAt")])).documents.map(e=>({...e,name:e.walletName||e.name,address:e.walletAddress||e.address}))}static async getWallet(e){return await s.LL.getDocument(s.AH,s.WU.WALLETS,e)}static async updateWallet(e,t){return await s.LL.updateDocument(s.AH,s.WU.WALLETS,e,t)}static async setDefaultWallet(e,t){let a=await this.getUserWallets(e);return await Promise.all(a.map(e=>this.updateWallet(e.walletId,{isDefault:!1}))),await this.updateWallet(t,{isDefault:!0})}static async getTokens(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return(await s.LL.listDocuments(s.AH,s.WU.TOKENS,[s.XK.equal("isActive",!0),s.XK.orderAsc("name"),s.XK.limit(e)])).documents}static async getToken(e){return await s.LL.getDocument(s.AH,s.WU.TOKENS,e)}static async getTokenBySymbol(e){try{return(await s.LL.listDocuments(s.AH,s.WU.TOKENS,[s.XK.equal("symbol",e)])).documents[0]||null}catch(e){return null}}static async createTransaction(e){let t=s.ID.unique();return await s.LL.createDocument(s.AH,s.WU.TRANSACTIONS,t,{...e,transactionId:t,createdAt:new Date().toISOString()})}static async getUserTransactions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return(await s.LL.listDocuments(s.AH,s.WU.TRANSACTIONS,[s.XK.or([s.XK.equal("fromUserId",e),s.XK.equal("toUserId",e)]),s.XK.orderDesc("createdAt"),s.XK.limit(t)])).documents}static async getTransaction(e){return await s.LL.getDocument(s.AH,s.WU.TRANSACTIONS,e)}static async updateTransaction(e,t){return await s.LL.updateDocument(s.AH,s.WU.TRANSACTIONS,e,t)}static async createPaymentRequest(e){let t=s.ID.unique();return await s.LL.createDocument(s.AH,s.WU.PAYMENT_REQUESTS,t,{...e,requestId:t,createdAt:new Date().toISOString()})}static async getUserPaymentRequests(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sent";return(await s.LL.listDocuments(s.AH,s.WU.PAYMENT_REQUESTS,[s.XK.equal("sent"===t?"fromUserId":"toUserId",e),s.XK.orderDesc("createdAt")])).documents}static async getPaymentRequest(e){return await s.LL.getDocument(s.AH,s.WU.PAYMENT_REQUESTS,e)}static async updatePaymentRequest(e,t){await s.LL.updateDocument(s.AH,s.WU.PAYMENT_REQUESTS,e,t)}static async getPaymentRequestByInvoice(e){let t=await s.LL.listDocuments(s.AH,s.WU.PAYMENT_REQUESTS,[s.XK.equal("invoiceNumber",e)]);if(0===t.documents.length)throw Error("Payment request not found");return t.documents[0]}static async getExchangeRates(){return(await s.LL.listDocuments(s.AH,s.WU.EXCHANGE_RATES,[s.XK.equal("isActive",!0),s.XK.orderDesc("lastUpdated")])).documents}static async getExchangeRate(e,t){try{return(await s.LL.listDocuments(s.AH,s.WU.EXCHANGE_RATES,[s.XK.equal("fromCurrency",e),s.XK.equal("toCurrency",t),s.XK.equal("isActive",!0)])).documents[0]||null}catch(e){return null}}static async createSecurityLog(e){let t=s.ID.unique();return await s.LL.createDocument(s.AH,s.WU.SECURITY_LOGS,t,{...e,logId:t,createdAt:new Date().toISOString()})}static async getUserSecurityLogs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return(await s.LL.listDocuments(s.AH,s.WU.SECURITY_LOGS,[s.XK.equal("userId",e),s.XK.orderDesc("createdAt"),s.XK.limit(t)])).documents}static async createAPIKey(e){let t=s.ID.unique();return await s.LL.createDocument(s.AH,s.WU.API_KEYS,t,{...e,keyId:t,createdAt:new Date().toISOString()})}static async getUserAPIKeys(e){return(await s.LL.listDocuments(s.AH,s.WU.API_KEYS,[s.XK.equal("userId",e),s.XK.orderDesc("createdAt")])).documents}static async updateAPIKey(e,t){return await s.LL.updateDocument(s.AH,s.WU.API_KEYS,e,t)}static async deactivateAPIKey(e){return await this.updateAPIKey(e,{isActive:!1})}}},74219:(e,t,a)=>{a.d(t,{AH:()=>c,ID:()=>s.ID,LL:()=>l,WU:()=>i,XK:()=>s.XK,ct:()=>n});var s=a(69960);let r=new s.Kj;r.setEndpoint("https://fra.cloud.appwrite.io/v1").setProject("68399b0c0018d6ce71bc");let n=new s.gD(r),l=new s.Lv(r);new s.wc(r);let c="683a31960011608eaee5",i={USERS:"users",WALLETS:"wallets",TOKENS:"tokens",TRANSACTIONS:"transactions",PAYMENT_REQUESTS:"payment_requests",EXCHANGE_RATES:"exchange_rates",SECURITY_LOGS:"security_logs",API_KEYS:"api_keys"}},85430:(e,t,a)=>{a.r(t),a.d(t,{AuthProvider:()=>i,useAuth:()=>o});var s=a(74807),r=a(95423),n=a(53696),l=a(74219);let c=(0,r.createContext)(void 0);function i(e){let{children:t}=e,[a,i]=(0,r.useState)(null),[o,u]=(0,r.useState)(null),[d,m]=(0,r.useState)(!0),h=e=>e.split("@")[0].toLowerCase().replace(/[^a-z0-9]/g,""),x=async e=>{try{let t=await n.B.getUser(e.$id);if(t)return u(t),t}catch(e){console.log("Creating new user profile...")}try{let t=h(e.email),a={userId:e.$id,email:e.email,username:t,displayName:e.name||t,kycStatus:"pending",kycLevel:0,twoFactorEnabled:!1,isActive:!0,preferredCurrency:"USD"},s=await n.B.createUser(a);return u(s),await n.B.createSecurityLog({userId:e.$id,action:"profile_created",ipAddress:"unknown",success:!0,riskScore:0}),s}catch(e){throw console.error("Failed to create user profile:",e),e}},g=async()=>{if(a)try{let e=await n.B.getUser(a.$id);u(e)}catch(e){console.error("Failed to refresh profile:",e)}},y=async(e,t)=>{m(!0);try{await l.ct.createEmailPasswordSession(e,t);let a=await l.ct.get();i(a),await x(a),await n.B.createSecurityLog({userId:a.$id,action:"login_success",ipAddress:"unknown",success:!0,riskScore:0})}catch(t){if(e)try{let t=await n.B.getUserByEmail(e);t&&await n.B.createSecurityLog({userId:t.userId,action:"login_failed",ipAddress:"unknown",success:!1,riskScore:3})}catch(e){console.error("Failed to log security event:",e)}throw t}finally{m(!1)}},f=async(e,t,a)=>{m(!0);try{await l.ct.create("unique()",e,t,a),await l.ct.createEmailPasswordSession(e,t);let s=await l.ct.get();i(s),await x(s)}catch(e){throw e}finally{m(!1)}},p=async()=>{try{a&&await n.B.createSecurityLog({userId:a.$id,action:"logout",ipAddress:"unknown",success:!0,riskScore:0}),await l.ct.deleteSession("current"),i(null),u(null)}catch(e){console.error("Logout failed:",e)}};return(0,r.useEffect)(()=>{(async()=>{m(!0);try{let e=await l.ct.get();i(e),await x(e)}catch(e){i(null),u(null)}finally{m(!1)}})()},[]),(0,s.jsx)(c.Provider,{value:{user:a,userProfile:o,isLoading:d,login:y,register:f,logout:p,refreshProfile:g},children:t})}function o(){let e=(0,r.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},99847:(e,t,a)=>{a.d(t,{A:()=>s.useAuth,O:()=>s.AuthProvider});var s=a(85430)}}]);